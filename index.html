<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3í•™ë…„ 2ë°˜ ê²Œì‹œíŒ</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0; padding: 0; min-height: 100vh; }
    header { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: white; padding: 1.5rem; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    header h1 { margin: 0; font-size: 2rem; }
    main { max-width: 900px; margin: 2rem auto; padding: 1rem; }
    .write-form { background: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 8px 32px rgba(0,0,0,0.1); display: none; }
    .write-form.active { display: block; }
    .form-group { margin-bottom: 1rem; }
    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333; }
    .form-group input, .form-group textarea { width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s; }
    .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #667eea; }
    .form-group textarea { resize: vertical; min-height: 100px; }
    .btn { padding: 0.8rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: all 0.3s; margin-right: 0.5rem; }
    .btn-primary { background: #667eea; color: white; }
    .btn-primary:hover { background: #5a6fd8; transform: translateY(-2px); }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-secondary:hover { background: #5a6268; }
    .btn-write { position: fixed; bottom: 2rem; right: 2rem; width: 60px; height: 60px; border-radius: 50%; background: #667eea; color: white; border: none; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: all 0.3s; z-index: 1000; }
    .btn-write:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }
    .controls { background: white; padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; }
    .search-box { flex: 1; min-width: 200px; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; }
    .search-box:focus { outline: none; border-color: #667eea; }
    .post { background: white; padding: 2rem; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; animation: fadeInUp 0.6s ease-out; }
    .post:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    .post h3 { margin-top: 0; color: #333; font-size: 1.3rem; }
    .post-info { font-size: 0.9rem; color: #666; margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; }
    .post-content { color: #555; line-height: 1.6; margin-bottom: 1rem; }
    .post-actions { display: flex; gap: 0.5rem; margin-top: 1rem; }
    .post-actions button { background: none; border: 1px solid #ddd; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; }
    .post-actions button:hover { background: #f8f9fa; border-color: #667eea; color: #667eea; }
    .like-btn.liked { background: #e3f2fd; color: #1976d2; border-color: #1976d2; }
    .comments { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee; display: none; }
    .comments.show { display: block; }
    .comment { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 0.5rem; }
    .comment-author { font-weight: bold; color: #667eea; margin-bottom: 0.5rem; }
    .category-btn { background: rgba(255,255,255,0.3); color: #667eea; border: 2px solid #667eea; font-weight: bold; }
    .category-btn.active { background: #667eea; color: white; }
    .category-btn:hover { background: #667eea; color: white; transform: translateY(-2px); }
    @media (max-width: 768px) { main { margin: 1rem; padding: 0.5rem; } .controls { flex-direction: column; align-items: stretch; } .search-box { min-width: auto; } .btn-write { bottom: 1rem; right: 1rem; } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ« 3í•™ë…„ 2ë°˜ ê²Œì‹œíŒ</h1>
    <p>ìš°ë¦¬ ë°˜ì˜ ì†Œí†µ ê³µê°„ì…ë‹ˆë‹¤ âœ¨</p>
    <div style="font-size: 0.9rem; margin-top: 0.5rem;">
      í˜„ì¬ ì‚¬ìš©ì: <strong>ê´€ë¦¬ì</strong> ğŸ‘‘
    </div>
  </header>

  <main>
    <!-- ê¸€ì“°ê¸° í¼ -->
    <div class="write-form" id="writeForm">
      <h2>âœï¸ ìƒˆ ê¸€ì“°ê¸°</h2>
      <div class="form-group">
        <label for="postAuthor">ì‘ì„±ì</label>
        <input type="text" id="postAuthor" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
      </div>
      <div class="form-group">
        <label for="postCategory">ì¹´í…Œê³ ë¦¬</label>
        <select id="postCategory" style="width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
          <option value="ê³µì§€ì‚¬í•­">ğŸ“¢ ê³µì§€ì‚¬í•­</option>
          <option value="ìŠ¤í„°ë””">ğŸ“š ìŠ¤í„°ë””</option>
          <option value="í–‰ì‚¬">ğŸ‰ í–‰ì‚¬</option>
          <option value="ììœ ê²Œì‹œíŒ" selected>ğŸ’¬ ììœ ê²Œì‹œíŒ</option>
        </select>
      </div>
      <div class="form-group">
        <label for="postTitle">ì œëª©</label>
        <input type="text" id="postTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
      </div>
      <div class="form-group">
        <label for="postContent">ë‚´ìš©</label>
        <textarea id="postContent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
      </div>
      <button class="btn btn-primary" onclick="submitPost()">ğŸ“ ê¸€ì“°ê¸°</button>
      <button class="btn btn-secondary" onclick="closeWriteForm()">âŒ ì·¨ì†Œ</button>
    </div>

    <!-- í•„í„°/ê²€ìƒ‰ -->
    <div class="controls">
      <input type="text" class="search-box" id="searchBox" placeholder="ğŸ” ê²Œì‹œê¸€ ê²€ìƒ‰..." onkeyup="searchPosts()">
      <button class="btn btn-primary category-btn active" onclick="filterByCategory('ì „ì²´')">ğŸ“‹ ì „ì²´</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('ê³µì§€ì‚¬í•­')">ğŸ“¢ ê³µì§€ì‚¬í•­</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('ìŠ¤í„°ë””')">ğŸ“š ìŠ¤í„°ë””</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('í–‰ì‚¬')">ğŸ‰ í–‰ì‚¬</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('ììœ ê²Œì‹œíŒ')">ğŸ’¬ ììœ ê²Œì‹œíŒ</button>
    </div>

    <!-- ê²Œì‹œê¸€ -->
    <div id="postsContainer"></div>

    <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
    <button class="btn-write" onclick="openWriteForm()" title="ìƒˆ ê¸€ì“°ê¸°">âœï¸</button>
  </main>

  <script>
    let allPosts = [];
    let currentCategory = 'ì „ì²´';
    let likedPosts = new Set();
    let postIdCounter = 1;

    const categoryEmojis = {'ê³µì§€ì‚¬í•­':'ğŸ“¢','ìŠ¤í„°ë””':'ğŸ“š','í–‰ì‚¬':'ğŸ‰','ììœ ê²Œì‹œíŒ':'ğŸ’¬'};
    const container = document.getElementById('postsContainer');

    function renderPosts(posts=null){
      let postsToRender = posts? posts : (currentCategory==='ì „ì²´'? allPosts: allPosts.filter(p=>p.category===currentCategory));
      postsToRender.sort((a,b)=> new Date(b.date)-new Date(a.date));
      container.innerHTML = postsToRender.map(post=>`
        <div class="post" data-post-id="${post.id}">
          <div class="post-info">
            <span>${categoryEmojis[post.category]} ${post.category}</span>
            <span>ğŸ“… ${post.date}</span>
            <span>ğŸ‘¤ ${post.author}</span>
            <span>â¤ï¸ ${post.likes}ê°œ</span>
            <span>ğŸ’¬ ${post.comments.length}ê°œ</span>
          </div>
          <h3>${post.title}</h3>
          <div class="post-content" id="post-content-${post.id}" style="max-height:100px;overflow:hidden;">${post.content}</div>
          <button class="btn btn-secondary" onclick="toggleFullContent(${post.id})" id="toggle-btn-${post.id}">ë”ë³´ê¸°</button>
          <div class="post-actions">
            <button class="like-btn ${likedPosts.has(post.id)?'liked':''}" onclick="toggleLike(${post.id})">${likedPosts.has(post.id)?'â¤ï¸':'ğŸ¤'} ì¢‹ì•„ìš”</button>
            <button onclick="toggleComments(${post.id})">ğŸ’¬ ëŒ“ê¸€</button>
            <button onclick="deletePost(${post.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
          </div>
          <div class="comments" id="comments-${post.id}">
            ${post.comments.map(c=>`<div class="comment"><div class="comment-author">${c.author}</div><div>${c.content}</div></div>`).join('')}
            <div style="margin-top:1rem;">
              <input type="text" placeholder="ëŒ“ê¸€ ì‘ì„±ì" id="comment-author-${post.id}" style="width:25%;padding:0.5rem;margin-right:0.5rem;border:1px solid #ddd;border-radius:4px;">
              <input type="text" placeholder="ëŒ“ê¸€ ë‚´ìš©" id="comment-input-${post.id}" style="width:45%;padding:0.5rem;margin-right:0.5rem;border:1px solid #ddd;border-radius:4px;">
              <button class="btn btn-primary" onclick="addComment(${post.id})" style="padding:0.5rem 1rem;">ëŒ“ê¸€ ì‘ì„±</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function openWriteForm(){ document.getElementById('writeForm').classList.add('active'); document.getElementById('postAuthor').focus(); }
    function closeWriteForm(){ document.getElementById('writeForm').classList.remove('active'); clearForm(); }
    function clearForm(){ document.getElementById('postAuthor').value=''; document.getElementById('postTitle').value=''; document.getElementById('postContent').value=''; document.getElementById('postCategory').value='ììœ ê²Œì‹œíŒ'; }

    function filterByCategory(category){ currentCategory=category; document.querySelectorAll('.category-btn').forEach(btn=>btn.classList.remove('active')); event.target.classList.add('active'); renderPosts(); document.getElementById('searchBox').value=''; }

    function submitPost(){
      const author=document.getElementById('postAuthor').value.trim();
      const title=document.getElementById('postTitle').value.trim();
      const content=document.getElementById('postContent').value.trim();
      const category=document.getElementById('postCategory').value;
      if(!author||!title||!content){alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');return;}
      allPosts.unshift({id:postIdCounter++,title,content,author,category,date:new Date().toISOString().split('T')[0],likes:0,comments:[]});
      renderPosts(); closeWriteForm(); alert('âœ… ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }

    function toggleLike(postId){
      const post=allPosts.find(p=>p.id===postId); if(!post) return;
      if(likedPosts.has(postId)){ likedPosts.delete(postId); post.likes=Math.max(0,post.likes-1); } else { likedPosts.add(postId); post.likes++; }
      renderPosts();
    }

    function toggleComments(postId){ document.getElementById(`comments-${postId}`).classList.toggle('show'); }

    function addComment(postId){
      const author=document.getElementById(`comment-author-${postId}`).value.trim();
      const content=document.getElementById(`comment-input-${postId}`).value.trim();
      if(!author||!content){alert('ëŒ“ê¸€ ì‘ì„±ìì™€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return;}
      const post=allPosts.find(p=>p.id===postId); post.comments.push({author,content});
      document.getElementById(`comment-author-${postId}`).value='';
      document.getElementById(`comment-input-${postId}`).value='';
      renderPosts();
      setTimeout(()=>document.getElementById(`comments-${postId}`).classList.add('show'),100);
    }

    function deletePost(postId){ if(confirm('ê²Œì‹œê¸€ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){ allPosts=allPosts.filter(p=>p.id!==postId); likedPosts.delete(postId); renderPosts(); alert('âœ… ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.'); } }

    function toggleFullContent(postId){
      const contentDiv=document.getElementById(`post-content-${postId}`);
      const btn=document.getElementById(`toggle-btn-${postId}`);
      if(contentDiv.style.maxHeight==='none'){ contentDiv.style.maxHeight='100px'; btn.textContent='ë”ë³´ê¸°'; } else { contentDiv.style.maxHeight='none'; btn.textContent='ì ‘ê¸°'; }
    }

    function searchPosts(){
      const term=document.getElementById('searchBox').value.toLowerCase();
      let posts=currentCategory==='ì „ì²´'? allPosts: allPosts.filter(p=>p.category===currentCategory);
      posts=posts.filter(p=>p.title.toLowerCase().includes(term)||p.content.toLowerCase().includes(term)||p.author.toLowerCase().includes(term));
      renderPosts(posts);
    }

    renderPosts();
  </script>
</body>
</html>
