<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3학년 2반 게시판</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0; padding: 0; min-height: 100vh; }
    header { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: white; padding: 1.5rem; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    header h1 { margin: 0; font-size: 2rem; }
    main { max-width: 900px; margin: 2rem auto; padding: 1rem; }
    .write-form { background: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 8px 32px rgba(0,0,0,0.1); display: none; }
    .write-form.active { display: block; }
    .form-group { margin-bottom: 1rem; }
    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333; }
    .form-group input, .form-group textarea { width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s; }
    .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #667eea; }
    .form-group textarea { resize: vertical; min-height: 100px; }
    .btn { padding: 0.8rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: all 0.3s; margin-right: 0.5rem; }
    .btn-primary { background: #667eea; color: white; }
    .btn-primary:hover { background: #5a6fd8; transform: translateY(-2px); }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-secondary:hover { background: #5a6268; }
    .btn-write { position: fixed; bottom: 2rem; right: 2rem; width: 60px; height: 60px; border-radius: 50%; background: #667eea; color: white; border: none; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: all 0.3s; z-index: 1000; }
    .btn-write:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }
    .controls { background: white; padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; }
    .search-box { flex: 1; min-width: 200px; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; }
    .search-box:focus { outline: none; border-color: #667eea; }
    .post { background: white; padding: 2rem; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; animation: fadeInUp 0.6s ease-out; }
    .post:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    .post h3 { margin-top: 0; color: #333; font-size: 1.3rem; }
    .post-info { font-size: 0.9rem; color: #666; margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; }
    .post-content { color: #555; line-height: 1.6; margin-bottom: 1rem; }
    .post-actions { display: flex; gap: 0.5rem; margin-top: 1rem; }
    .post-actions button { background: none; border: 1px solid #ddd; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; }
    .post-actions button:hover { background: #f8f9fa; border-color: #667eea; color: #667eea; }
    .like-btn.liked { background: #e3f2fd; color: #1976d2; border-color: #1976d2; }
    .comments { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee; display: none; }
    .comments.show { display: block; }
    .comment { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 0.5rem; }
    .comment-author { font-weight: bold; color: #667eea; margin-bottom: 0.5rem; }
    .category-btn { background: rgba(255,255,255,0.3); color: #667eea; border: 2px solid #667eea; font-weight: bold; }
    .category-btn.active { background: #667eea; color: white; }
    .category-btn:hover { background: #667eea; color: white; transform: translateY(-2px); }
    @media (max-width: 768px) { main { margin: 1rem; padding: 0.5rem; } .controls { flex-direction: column; align-items: stretch; } .search-box { min-width: auto; } .btn-write { bottom: 1rem; right: 1rem; } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>
  <header>
    <h1>🏫 3학년 2반 게시판</h1>
    <p>우리 반의 소통 공간입니다 ✨</p>
    <div style="font-size: 0.9rem; margin-top: 0.5rem;">
      현재 사용자: <strong>관리자</strong> 👑
    </div>
  </header>

  <main>
    <!-- 글쓰기 폼 -->
    <div class="write-form" id="writeForm">
      <h2>✏️ 새 글쓰기</h2>
      <div class="form-group">
        <label for="postAuthor">작성자</label>
        <input type="text" id="postAuthor" placeholder="이름을 입력하세요">
      </div>
      <div class="form-group">
        <label for="postCategory">카테고리</label>
        <select id="postCategory" style="width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
          <option value="공지사항">📢 공지사항</option>
          <option value="스터디">📚 스터디</option>
          <option value="행사">🎉 행사</option>
          <option value="자유게시판" selected>💬 자유게시판</option>
        </select>
      </div>
      <div class="form-group">
        <label for="postTitle">제목</label>
        <input type="text" id="postTitle" placeholder="제목을 입력하세요">
      </div>
      <div class="form-group">
        <label for="postContent">내용</label>
        <textarea id="postContent" placeholder="내용을 입력하세요"></textarea>
      </div>
      <button class="btn btn-primary" onclick="submitPost()">📝 글쓰기</button>
      <button class="btn btn-secondary" onclick="closeWriteForm()">❌ 취소</button>
    </div>

    <!-- 필터/검색 -->
    <div class="controls">
      <input type="text" class="search-box" id="searchBox" placeholder="🔍 게시글 검색..." onkeyup="searchPosts()">
      <button class="btn btn-primary category-btn active" onclick="filterByCategory('전체')">📋 전체</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('공지사항')">📢 공지사항</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('스터디')">📚 스터디</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('행사')">🎉 행사</button>
      <button class="btn btn-primary category-btn" onclick="filterByCategory('자유게시판')">💬 자유게시판</button>
    </div>

    <!-- 게시글 -->
    <div id="postsContainer"></div>

    <!-- 글쓰기 버튼 -->
    <button class="btn-write" onclick="openWriteForm()" title="새 글쓰기">✏️</button>
  </main>

  <script>
    let allPosts = [];
    let currentCategory = '전체';
    let likedPosts = new Set();
    let postIdCounter = 1;

    const categoryEmojis = {'공지사항':'📢','스터디':'📚','행사':'🎉','자유게시판':'💬'};
    const container = document.getElementById('postsContainer');

    function renderPosts(posts=null){
      let postsToRender = posts? posts : (currentCategory==='전체'? allPosts: allPosts.filter(p=>p.category===currentCategory));
      postsToRender.sort((a,b)=> new Date(b.date)-new Date(a.date));
      container.innerHTML = postsToRender.map(post=>`
        <div class="post" data-post-id="${post.id}">
          <div class="post-info">
            <span>${categoryEmojis[post.category]} ${post.category}</span>
            <span>📅 ${post.date}</span>
            <span>👤 ${post.author}</span>
            <span>❤️ ${post.likes}개</span>
            <span>💬 ${post.comments.length}개</span>
          </div>
          <h3>${post.title}</h3>
          <div class="post-content" id="post-content-${post.id}" style="max-height:100px;overflow:hidden;">${post.content}</div>
          <button class="btn btn-secondary" onclick="toggleFullContent(${post.id})" id="toggle-btn-${post.id}">더보기</button>
          <div class="post-actions">
            <button class="like-btn ${likedPosts.has(post.id)?'liked':''}" onclick="toggleLike(${post.id})">${likedPosts.has(post.id)?'❤️':'🤍'} 좋아요</button>
            <button onclick="toggleComments(${post.id})">💬 댓글</button>
            <button onclick="deletePost(${post.id})">🗑️ 삭제</button>
          </div>
          <div class="comments" id="comments-${post.id}">
            ${post.comments.map(c=>`<div class="comment"><div class="comment-author">${c.author}</div><div>${c.content}</div></div>`).join('')}
            <div style="margin-top:1rem;">
              <input type="text" placeholder="댓글 작성자" id="comment-author-${post.id}" style="width:25%;padding:0.5rem;margin-right:0.5rem;border:1px solid #ddd;border-radius:4px;">
              <input type="text" placeholder="댓글 내용" id="comment-input-${post.id}" style="width:45%;padding:0.5rem;margin-right:0.5rem;border:1px solid #ddd;border-radius:4px;">
              <button class="btn btn-primary" onclick="addComment(${post.id})" style="padding:0.5rem 1rem;">댓글 작성</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function openWriteForm(){ document.getElementById('writeForm').classList.add('active'); document.getElementById('postAuthor').focus(); }
    function closeWriteForm(){ document.getElementById('writeForm').classList.remove('active'); clearForm(); }
    function clearForm(){ document.getElementById('postAuthor').value=''; document.getElementById('postTitle').value=''; document.getElementById('postContent').value=''; document.getElementById('postCategory').value='자유게시판'; }

    function filterByCategory(category){ currentCategory=category; document.querySelectorAll('.category-btn').forEach(btn=>btn.classList.remove('active')); event.target.classList.add('active'); renderPosts(); document.getElementById('searchBox').value=''; }

    function submitPost(){
      const author=document.getElementById('postAuthor').value.trim();
      const title=document.getElementById('postTitle').value.trim();
      const content=document.getElementById('postContent').value.trim();
      const category=document.getElementById('postCategory').value;
      if(!author||!title||!content){alert('모든 필드를 입력해주세요!');return;}
      allPosts.unshift({id:postIdCounter++,title,content,author,category,date:new Date().toISOString().split('T')[0],likes:0,comments:[]});
      renderPosts(); closeWriteForm(); alert('✅ 글이 성공적으로 작성되었습니다!');
    }

    function toggleLike(postId){
      const post=allPosts.find(p=>p.id===postId); if(!post) return;
      if(likedPosts.has(postId)){ likedPosts.delete(postId); post.likes=Math.max(0,post.likes-1); } else { likedPosts.add(postId); post.likes++; }
      renderPosts();
    }

    function toggleComments(postId){ document.getElementById(`comments-${postId}`).classList.toggle('show'); }

    function addComment(postId){
      const author=document.getElementById(`comment-author-${postId}`).value.trim();
      const content=document.getElementById(`comment-input-${postId}`).value.trim();
      if(!author||!content){alert('댓글 작성자와 내용을 입력해주세요!'); return;}
      const post=allPosts.find(p=>p.id===postId); post.comments.push({author,content});
      document.getElementById(`comment-author-${postId}`).value='';
      document.getElementById(`comment-input-${postId}`).value='';
      renderPosts();
      setTimeout(()=>document.getElementById(`comments-${postId}`).classList.add('show'),100);
    }

    function deletePost(postId){ if(confirm('게시글을 정말 삭제하시겠습니까?')){ allPosts=allPosts.filter(p=>p.id!==postId); likedPosts.delete(postId); renderPosts(); alert('✅ 게시글이 삭제되었습니다.'); } }

    function toggleFullContent(postId){
      const contentDiv=document.getElementById(`post-content-${postId}`);
      const btn=document.getElementById(`toggle-btn-${postId}`);
      if(contentDiv.style.maxHeight==='none'){ contentDiv.style.maxHeight='100px'; btn.textContent='더보기'; } else { contentDiv.style.maxHeight='none'; btn.textContent='접기'; }
    }

    function searchPosts(){
      const term=document.getElementById('searchBox').value.toLowerCase();
      let posts=currentCategory==='전체'? allPosts: allPosts.filter(p=>p.category===currentCategory);
      posts=posts.filter(p=>p.title.toLowerCase().includes(term)||p.content.toLowerCase().includes(term)||p.author.toLowerCase().includes(term));
      renderPosts(posts);
    }

    renderPosts();
  </script>
</body>
</html>
